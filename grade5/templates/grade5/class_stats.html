{% extends "base.html" %}

{% block title %}–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª–∞—Å—Å–∞–º{% endblock %}

{% block content %}
<div class="card">
    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ 5 –∫–ª–∞—Å—Å–∞</h2>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 32px;">
        
        <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–Ω–∏–∫–æ–≤ –ø–æ –∫–ª–∞—Å—Å–∞–º -->
        <div class="card">
            <h3>üë• –£—á–µ–Ω–∏–∫–∏ –ø–æ –∫–ª–∞—Å—Å–∞–º</h3>
            {% for stat in class_stats %}
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <span>{{ stat.classname }}</span>
                <strong class="badge badge-success">{{ stat.pupils_count }}</strong>
            </div>
            {% empty %}
            <p>–£—á–µ–Ω–∏–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
            {% endfor %}
        </div>
        
        <!-- –†–µ—à–µ–Ω–∏—è –ø–æ –∫–ª–∞—Å—Å–∞–º -->
        <div class="card">
            <h3>‚úÖ –†–µ—à–µ–Ω–∏—è –ø–æ –∫–ª–∞—Å—Å–∞–º</h3>
            {% for sol in class_solutions %}
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <span>{{ sol.user__pupilprofile__classname }}</span>
                <strong class="badge badge-primary">
                    {{ sol.solutions_count }} ({{ sol.correct_count }} ‚úÖ)
                </strong>
            </div>
            {% empty %}
            <p>–†–µ—à–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
            {% endfor %}
        </div>
        
    </div>
    
    <!-- –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –∫–ª–∞—Å—Å–æ–≤ -->
    <div class="card">
        <h3>üèÜ –†–µ–π—Ç–∏–Ω–≥ –∫–ª–∞—Å—Å–æ–≤</h3>
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; min-width: 400px;">
                <thead>
                    <tr style="background: rgba(255,255,255,0.05);">
                        <th style="padding: 16px 12px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1);">–ö–ª–∞—Å—Å</th>
                        <th style="padding: 16px 12px; text-align: right; border-bottom: 2px solid rgba(255,255,255,0.1);">–†–µ—à–µ–Ω–æ –∑–∞–¥–∞—á</th>
                        <th style="padding: 16px 12px; text-align: right; border-bottom: 2px solid rgba(255,255,255,0.1);">–í–µ—Ä–Ω–æ</th>
                        <th style="padding: 16px 12px; text-align: right; border-bottom: 2px solid rgba(255,255,255,0.1);">–¢–æ—á–Ω–æ—Å—Ç—å</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sol in class_solutions %}
                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <td style="padding: 16px 12px; font-weight: 500;">
                            {{ sol.user__pupilprofile__classname }}
                        </td>
                        <td style="padding: 16px 12px; text-align: right; color: var(--text-muted);">
                            {{ sol.solutions_count }}
                        </td>
                        <td style="padding: 16px 12px; text-align: right;">
                            <span class="badge badge-success">{{ sol.correct_count }}</span>
                        </td>
                        <td style="padding: 16px 12px; text-align: right;">
                            {% widthratio sol.correct_count sol.solutions_count 100 %}%
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" style="padding: 32px; text-align: center; color: var(--text-muted);">
                            –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
