{# templates/teacher/dashboard.html #}
{% extends 'base.html' %}
{% load static %}

{% block title %}–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∏—Ç–µ–ª—è{% endblock %}

{% block content %}
<div class="container">
    <div class="py-5">
        <h1 class="mb-4">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.get_full_name }}</h1>
        
        <div class="row">
            {% for class in classes %}
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">{{ class.grade }} –∫–ª–∞—Å—Å {{ class.name }}</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">–£—á–µ–Ω–∏–∫–æ–≤: <strong>{{ class.students.count }}</strong></p>
                        <p class="text-muted">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞–±–æ—Ç: <strong>{{ class.assignments.filter|status:'active'|length }}</strong></p>
                    </div>
                    <div class="card-footer bg-light">
                        <a href="{% url 'create_assignment' class.id %}" class="btn btn-sm btn-primary">
                            ‚ûï –°–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—Ç—É
                        </a>
                        <a href="{% url 'class_statistics' class.id %}" class="btn btn-sm btn-info">
                            üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <hr class="my-5">
        
        <h2 class="mb-4">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</h2>
        
        {% if assignments %}
        <div class="table-responsive">
            <table class="table table-hover">
                <thead class="table-light">
                    <tr>
                        <th>–ö–ª–∞—Å—Å</th>
                        <th>–¢–µ–º–∞</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–°–æ–∑–¥–∞–Ω–∞</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for assignment in assignments %}
                    <tr>
                        <td><strong>{{ assignment.school_class }}</strong></td>
                        <td>{{ assignment.topic.name }}</td>
                        <td>{{ assignment.title }}</td>
                        <td>
                            {% if assignment.status == 'draft' %}
                                <span class="badge bg-secondary">–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
                            {% elif assignment.status == 'active' %}
                                <span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–∞</span>
                            {% else %}
                                <span class="badge bg-danger">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</span>
                            {% endif %}
                        </td>
                        <td>{{ assignment.created_at|date:'d.m.Y H:i' }}</td>
                        <td>
                            <a href="{% url 'assignment_detail' assignment.id %}" class="btn btn-xs btn-outline-primary">
                                –ü—Ä–æ—Å–º–æ—Ç—Ä
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p class="alert alert-info">–í—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ –Ω–∏ –æ–¥–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
